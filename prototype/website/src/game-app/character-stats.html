<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/paper-tooltip/paper-tooltip.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/polymer/lib/mixins/gesture-event-listeners.html">

<!--
    @author Robin Duda
    Polymer element for a simple admin-panel using iron-pages.
 -->

<dom-module id="character-stats">
    <link rel="import" href="../style/theme.css" type="css">
    <link rel="import" href="../style/style.css" type="css">
    <template>
        <style>
            :host {
                display: block;
            }

            .container {
                display: flex;
                justify-content: space-around;
                flex-wrap: wrap;
            }

            .attribute-wide {
                display: flex;
                width: 25%;
                margin-left: 12.5%;
                margin-right: 12.5%;
                flex-direction: row;
                justify-content: space-between;
            }

            .attribute-compact {
                display: flex;
                width: 100%;
                margin-left: 20%;
                margin-right: 20%;
                flex-direction: row;
                justify-content: space-between;
            }

            .name {

            }

            .value {
                /* get color based on class to be configured on class template. */
                color: #ff00cc;
            }

        </style>

        <div class="container">
            <template is="dom-repeat" items="[[_toList(selected)]]" as="attribute">
                <div class$="{{_layout(compact)}}">
                    <span class="name">[[attribute.name]]</span>
                    <span class="value" style$="color:[[selected.theme]];">[[attribute.value]]</span>
                </div>
            </template>
        </div>


    </template>
</dom-module>
<script>
    class CharacterStats extends Polymer.GestureEventListeners(Polymer.Element) {

        constructor() {
            super();
            this.compact = false;
        }

        static get is() {
            return 'character-stats';
        }

        static get properties() {
            return {
                compact: {
                    type: Boolean,
                    value: false
                }
            }
        }

        _layout() {
            let classname = 'attribute-' + ((this.compact) ? 'compact' : 'wide');
            console.log(this.compact);
            return classname;
        }

        _toList() {
            let stats = [];

            Object.keys(this.selected.stats).forEach((key, index) => {
                stats.splice(index, 0, {
                    name: key,
                    value: this.selected.stats[key]
                });
            });
            return stats;
        }
    }

    window.customElements.define(CharacterStats.is, CharacterStats);
</script>
