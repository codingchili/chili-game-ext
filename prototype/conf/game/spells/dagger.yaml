---
name: "Dagger"
description: "Strikes nearby targets with a daggur dealing ${this.character.stats.strength / 2} direct damage. Deals 50% bonus damage if target stands still."
cooldown: 0.5
casttime: 0.20
recharge: 3
charges: 5
target: caster
onCastBegin:
  jexl:
    return spells.energy(source, -15);
onCastComplete:
  groovy: |
    import com.codingchili.instance.model.stats.Attribute;
    import com.codingchili.instance.model.spells.DamageType;

    log.accept('casting dagger completed');

    damage = (source.stats[Attribute.strength] * -1 / 2);
    game.creatures().all().collect().each { creature ->
      if (!creature.equals(source)) {
        amplifier = (creature.vector.velocity == 0) ? 1.5 : 1.0;
        spells.damage(source, creature, damage * amplifier, DamageType.physical);
      }
    }