---
id: "lilith"
start: "welcome"
enabled:
  jexl:
    return !target.attributes['insulted'];
options:
  welcome:
    text: "Welcome, ${player.name}. I am your island guide."
    next:
    - id: "greeting"
      text: "Nice to meet you."
    - id: "buff"
      text: "May I have the buff of haste?"
    - id: "heal"
      text: "I am in need of some healing."
    - id: "quest"
      text: "[complete quest] island expedition"
    - id: "insult"
      text: "I am a master adventurer and you are a noob."
    - id: "travel-1"
      text: "take me to instance 1"
    - id: "travel-2"
      text: "take me to instance 2"
    - id: "travel-3"
      text: "take me to instance 3"
    - id: "travel-X"
      text: "take me to a non existing instance."
  travel-1:
    handler:
      jexl: |
        context.movement().travel(source, 'level 1');
  travel-2:
    handler:
      jexl: |
        context.movement().travel(source, 'level 2');
  travel-3:
    handler:
      jexl: |
        context.movement().travel(source, 'level 3');
  greeting:
    text: "Likewise."
    available:
      jexl: "return true;"
  buff:
    available:
      jexl: "return true;"
    handler:
      jexl: |
        context.spells().afflict(source, 'haste');
  heal:
    text: "Enjoy some health."
    handler:
      jexl: |
        context.spells().heal(source, 20.0);
    available:
        jexl: "return true;"
    next:
    - id: "welcome"
      text: "Who are you again?"
  quest:
    text: "You have completed your first quest! Enjoy 500 experience points."
    available:
      jexl: |
        return source.attributes['quest#1'] == null;
    handler:
      jexl: |
        source.attributes['quest#1'] = true;
        context.spells().experience(source, 500);
  insult:
    text: "Shut up ${player.name}, you're only level ${player.stats['level']} pfft."
    handler:
      jexl: |
        target.attributes['insulted'] = true;
