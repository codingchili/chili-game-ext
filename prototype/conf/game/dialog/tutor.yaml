---
id: "tutor"
start: "welcome"
enabled:
  jexl:
    return !target.attributes['insulted'];
options:
  welcome:
    text: "Welcome, ${player.name}. I am your island guide."
    next:
    - id: "greeting"
      text: "Nice to meet you."
    - id: "buff"
      text: "May I have the buff of haste?"
    - id: "heal"
      text: "I am in need of some healing."
    - id: "quest"
      text: "[complete quest] island expedition"
    - id: "insult"
      text: "I am a master adventurer and you are a noob."
  greeting:
    text: "Likewise."
    filter:
      jexl: "return true;"
  buff:
    filter:
      jexl: "return true;"
    handler:
      jexl: |
        context.spells().afflict(source, 'haste');
  heal:
    text: "Enjoy some health."
    handler:
      jexl: |
        context.spells().heal(source, 20.0);
    filter: 
        jexl: "return true;"
    next:
    - id: "welcome"
      text: "Who are you again?"
  quest:
    text: "You have completed your first quest! Enjoy 500 experience points."
    filter:
      jexl: |
        return source.attributes['quest#1'] == null;
    handler:
      jexl: |
        source.attributes['quest#1'] = true;
        context.spells().experience(source, 500);
  insult:
    text: "Shut up ${player.name}, you're only level ${player.stats['level']} pfft."
    handler:
      jexl: |
        target.attributes['insulted'] = true;
